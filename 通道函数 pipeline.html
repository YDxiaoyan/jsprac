<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>通道函数 pipeline</title>
  </head>

  <body>
    <script>
      const double = (x) => x + x;

      const triple = (x) => 3 * x;

      const quarter = (x) => x / 4;

      //调用pipe 根据参数顺序 组装返回一个新的函数
      // function pipe(...funcs) {
      //   return function (input) {
      //     return funcs.reduce(function (acc, curr) {
      //       return curr(acc);
      //     }, input);
      //   }
      // }

      const pipe =
        (...funcs) =>
        (input) =>
          funcs.reduce((acc, curr) => curr(acc), input);

      var result = pipe(quarter, double);
      console.log(result(10));

      // var result1 = pipe(triple, quarter, double);
      // console.log(result1(20));
    </script>
  </body>
</html>
